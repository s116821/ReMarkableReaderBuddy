<!-- e4827749-5a40-4525-8dd2-9dff45763b3e e83e1b43-4495-445d-82e5-35d6aff093ac -->
# ReMarkable Reader Buddy v0.1 Plan

## High-Level Steps

1. Scaffold Rust crate in `ReMarkableReaderBuddy` with CLI args and config loading, borrowing patterns from `ghostwriter/src/main.rs` but implementing all code locally without a direct dependency.
2. Implement core services module wrapping `ghostwriter` primitives (`Screenshot`, `Pen`, `Keyboard`, `Touch`, LLM engines) to expose a simplified orchestration interface (`AppContext`, async task loop) under `src/app/`.
3. Build vision pipeline in `src/analysis/` to:

- capture screenshot (or injected sample),
- run handwriting OCR via existing ghostwriter segmentation + feed to Tesseract/quickdraw fallback,
- detect circled regions (Hough-like contour detection with `imageproc`),
- associate nearest handwritten question text (bounding boxes, heuristics) and return structured `QuestionContext`.

4. Implement interaction workflow in `src/workflow/`:

- package question, annotated screenshot, and extracted handwriting into ChatGPT API request via `ghostwriter::llm_engine::openai`;
- add event loop responding to trigger touch;
- render answer on new page using `Pen` bitmap drawing APIs and `Keyboard` for typed fallback;
- erase original question text (draw white rectangle) while preserving circle and stamp unique symbol both on source and new page.

5. Add configuration + prompt assets (`config/default.toml`, `prompts/general.json` clone) and document usage in `README.md`; include integration test stub (feature-flagged desktop mode) and instructions for cross-compilation.

## Implementation Todos

- setup-crate: Initialize crate structure, wiring Cargo dependencies, env logger, CLI config.
- integrate-ghostwriter: Create service wrappers around `ghostwriter` modules for screenshot, drawing, and LLM.
- analyze-question: Implement circled-question extraction pipeline returning structured context objects.
- respond-and-render: Drive ChatGPT request, add page rendering, and symbol marking workflow.
- docs-and-tests: Write README bootstrap docs, sample config, and add smoke test harness (desktop mode).

### To-dos

- [x] Initialize crate structure, wiring Cargo dependencies, env logger, CLI config.
- [x] Create service wrappers around ghostwriter modules for screenshot, drawing, and LLM.
- [x] Implement circled-question extraction pipeline returning structured context objects.
- [x] Drive ChatGPT request, add page rendering, and symbol marking workflow.
- [x] Write README bootstrap docs, sample config, and add smoke test harness (desktop mode).